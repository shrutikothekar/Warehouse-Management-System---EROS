@model eros.Models.UserManagment

@{
    ViewData["Title"] = " Warehouse Management System - EROS";
    string role = Context.Request.HttpContext.Session.GetString("Role");
    var jsonData = Context.Request.HttpContext.Session.GetString("MenuMaster");
}

<div class="container-fluid">
    <div class=" mt-3">

        <!-- Breadcrumbs-->
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="#" class="text-dark">Dashboard</a>
            </li>
            <li class="breadcrumb-item active">Overview</li>
        </ol>
        @if (!string.IsNullOrEmpty(role))
        {
            @if (role == "ADMIN")
            {
                <div class="row">
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-primary o-hidden h-100">
                            <div class="card-body">
                                <div class="card-body-icon">
                                    <i class="fas fa-fw fa-shopping-cart"></i>
                                </div>
                                <div class="mr-5">Order Entry</div>
                                @*<h3 style="display:none" class="counter  text-right" id="salesOrderCounter">@ViewBag.SalesOrderCount</h3>*@
                                <h3 class="counter text-right" id="salesOrderCounter">@ViewBag.SalesOrderCount</h3>
                                <H5 class="counter  text-right" id="salesOrderCounter1"></H5>
                            </div>
                            <a class="card-footer text-white clearfix small z-1" href="/so_inward/SalesPendingList">
                                <span class="float-left">View All Order</span>
                                <span class="float-right">
                                    <i class="fas fa-angle-right"></i>
                                </span>
                            </a>
                        </div>
                    </div>
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-warning o-hidden h-100">
                            <div class="card-body">
                                <div class="card-body-icon">
                                    <i class="fas fa fa-check"></i>
                                </div>
                                <div class="mr-5">Purchase Order</div>
                                @* <h3 style="display:none" class="counter  text-right" id="purchaseOrderCounter">@ViewBag.purchaseOrderCount</h3> *@
                                <h3 class="counter text-right" id="purchaseOrderCount">@ViewBag.purchaseOrderCount</h3>
                                
                                <H5 class="counter  text-right" id="purchaseOrderCounter1"></H5>
                            </div>
                            <a class="card-footer text-white clearfix small z-1" href="/purchases/PurchasePendingList">
                                <span class="float-left">View All Order</span>
                                <span class="float-right">
                                    <i class="fas fa-angle-right"></i>
                                </span>
                            </a>
                        </div>
                    </div>
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-success o-hidden h-100">
                            <div class="card-body">
                                <div class="card-body-icon">
                                    <i class="fas fa-fw fa-list"></i>
                                </div>
                                <div class="mr-5">Stock Transactions</div>
                                <h3 class="counter text-right" id="transectionOrderCount">@ViewBag.DMRPRRPCount</h3>
                                <H5 class="counter  text-right" id="transectionOrderCounter1"></H5>
                            </div>
                            <a class="card-footer text-white clearfix small z-1" href="/Storage_Operation/CreateStockTransferHome">
                            @* <a class="card-footer text-white clearfix small z-1" href="/inwards/InwardPendingList"> *@
                                <span class="float-left">View Details</span>
                                <span class="float-right">
                                    <i class="fas fa-angle-right"></i>
                                </span>
                            </a>
                        </div>
                    </div>
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-danger o-hidden h-100" id="stockMovementCard">
                            <div class="card-body">
                                <div class="card-body-icon">
                                    <i class="fas fa-fw fa-shopping-cart"></i>
                                </div>
                                <div class="mr-5">Stock Ledger</div>
                            </div>
                            <a class="card-footer text-white clearfix small z-1" href="/Report/StokeLedger">
                                @*  *@
                                <span class="float-left">View Details</span>
                                <span class="float-right">
                                    <i class="fas fa-angle-right"></i>
                                </span>
                            </a>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="box">
                                    <div class="box-header with-border">
                                        <h3 class="box-title text-primary"><i class="fa fa-pie-chart"></i> Sales vs Purchase</h3>
                                
                                    </div>
                                    <div class="box-body">
                                        <div id="chart"></div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

            }
            else if (role == "HOSITE")
            {
                <div class="row">
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-primary o-hidden h-100">
                            <div class="card-body">
                                <div class="card-body-icon">
                                    <i class="fas fa-fw fa-shopping-cart"></i>
                                </div>
                                <div class="mr-5">Sales Order</div>
                                <h3 class="counter text-right" id="salesOrderCounter">@ViewBag.SalesOrderCount</h3>
                                <H5 class="counter  text-right" id="salesOrderCounter1"></H5>
                            </div>
                            <a class="card-footer text-white clearfix small z-1" href="/so_inward/SalesPendingList">
                                <span class="float-left">View All Order</span>
                                <span class="float-right">
                                    <i class="fas fa-angle-right"></i>
                                </span>
                            </a>
                        </div>
                    </div>


                </div>

                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="box">
                                    <div class="box-header with-border">
                                        <h3 class="box-title text-primary"><i class="fa fa-pie-chart"></i> Sales vs Purchase</h3>
                                    </div>
                                    <div class="box-body">
                                        <div id="chart"></div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>


            }
            else if (role == "WAREHOUSE")
            {
                <div class="row">
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-success o-hidden h-100">
                            <div class="card-body">
                                <div class="card-body-icon">
                                    <i class="fas fa-fw fa-list"></i>
                                </div>
                                <div class="mr-5">Pending Transactions</div>
                            </div>
                            <a class="card-footer text-white clearfix small z-1" href="/inwards/InwardPendingList">
                                <span class="float-left">View Details</span>
                                <span class="float-right">
                                    <i class="fas fa-angle-right"></i>
                                </span>
                            </a>
                        </div>
                    </div>
                    <div class="col-xl-3 col-sm-6 mb-3">
                        <div class="card text-white bg-danger o-hidden h-100">
                            <div class="card-body">
                                <div class="card-body-icon">
                                    <i class="fas fa-fw fa-shopping-cart"></i>
                                </div>
                                <div class="mr-5">Stock Movement</div>
                            </div>
                            <a class="card-footer text-white clearfix small z-1" href="/inwards/StockMovementList">
                                <span class="float-left">View Details</span>
                                <span class="float-right">
                                    <i class="fas fa-angle-right"></i>
                                </span>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="box">
                                    <div class="box-header with-border">
                                        <h3 class="box-title text-primary"><i class="fa fa-pie-chart"></i> Sales vs Purchase</h3>
                                       
                                    </div>
                                    <div class="box-body">
                                        <div id="chart"></div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

            }
        }
        else
        {
            <!-- Handle the case when role is not set -->
            <div class="container">
                <div class="alert alert-danger alert-dismissible fade show">
                    <h6 class="alert-heading">
                        <i class="bi-exclamation-octagon-fill"></i>
                        No Access !!
                    </h6>
                    <p>
                        You do not have access to this page. Please contact your administrator for assistance.
                    </p>
                    <hr>
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            </div>
        }

        <!-- Icon Cards-->



    </div>
</div>
<!-- Essential JS 1 CSS -->
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script src="https://cdn.syncfusion.com/js/assets/external/jquery-1.10.2.min.js"></script>
<!-- Essential JS UI widget -->
<script src="https://cdn.syncfusion.com/24.2.3/js/web/ej.web.all.min.js"></script>
@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

}

<script>
    // Fetch data from controller action
    $.get('@Url.Action("GetData", "Home")', function (data) {

        console.log(data);

        var options = {
            chart: {
                type: 'line',
                height: 350
            },
            series: [{
                name: 'Purchase',
                type: 'column',
                data: data.map(item => item.y1)
            }, {
                name: 'Sales',
                type: 'line',
                data: data.map(item => item.y2)
            }],
            xaxis: {
                categories: data.map(item => item.x)
            }
        };

        var chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();
    });
</script>

<script>
  @*   // Define SweetAlert function
    function showAlert() {
        Swal.fire({
            title: 'Stock Movement Alert!',
            text: 'Functionality Not Defined!',
            icon: 'info',
            confirmButtonText: 'OK'
        });
        return true;
    }


    // Attach click event listener to the card
    document.getElementById('stockMovementCard').addEventListener('click', showAlert); *@
</script>